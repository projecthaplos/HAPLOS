<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>About — Project HAPLOS</title>

  <!-- Fonts + Icons + Chart.js -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Manrope:wght@400;600;800&family=Bebas+Neue&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --dark:#23260F;
      --olive:#58592F;
      --taupe:#A6A085;
      --beige:#D9D5C5;
      --offwhite:#F9F8F5;
      --muted:rgba(35,38,15,0.70);
      --accent:var(--olive);
      --highlight:#3E7B3A;
      --glass: rgba(255,255,255,0.65);
      --maxw:1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Poppins", "Manrope", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: linear-gradient(180deg,#fbfaf6 0%, #f3efe6 100%);
      color:var(--dark);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* decorative vector waves (behind content) */
    .bg-wave {
      position:fixed;
      pointer-events:none;
      z-index:0;
      mix-blend-mode:multiply;
      opacity:0.14;
      filter: blur(18px);
    }
    .bg-wave.top-right{
      top:-6vh;
      right:-8vw;
      width:68vw;
      transform:rotate(12deg);
    }
    .bg-wave.bottom-left{
      bottom:-8vh;
      left:-10vw;
      width:64vw;
      transform:rotate(-8deg);
      opacity:0.12;
      filter: blur(20px) saturate(120%);
    }

    /* Header */
    header{
      position:sticky;
      top:0;
      z-index:50;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:20px 6vw;
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(255,255,255,0.78), rgba(255,255,255,0.48));
      border-bottom: 1px solid rgba(20,20,18,0.04);
    }
    .brand{display:flex;gap:12px;align-items:center}
    .mark{
      width:46px;height:46px;border-radius:12px;display:grid;place-items:center;
      background:linear-gradient(180deg,var(--beige),var(--taupe));
      box-shadow: 0 6px 18px rgba(34,36,16,0.06), inset 0 -4px 8px rgba(255,255,255,0.2);
    }
    .brand .title{font-weight:700;line-height:1;color:var(--dark);font-family:"Manrope",sans-serif}
    nav ul{display:flex;gap:14px;align-items:center;margin:0;padding:0;list-style:none}
    nav a{color:var(--dark);font-weight:600;text-decoration:none;padding:8px 12px;border-radius:10px;transition:.20s}
    nav a:hover{background:rgba(0,0,0,0.05)}

    /* page container */
    main{max-width:var(--maxw);margin:36px auto;padding:0 6vw 80px;position:relative;z-index:10}

    /* hero */
    .hero{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:20px;
      align-items:center;
      padding:26px;
      border-radius:16px;
      background: linear-gradient(180deg, rgba(255,255,255,0.96), #fff);
      box-shadow: 0 20px 60px rgba(28,30,16,0.05);
      border: 1px solid rgba(34,36,16,0.03);
      position:relative;
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute;
      right:-8%;
      top:-30%;
      width:320px;height:320px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(62,123,58,0.06), transparent 40%);
      transform: translate3d(0,0,0);
      pointer-events:none;
    }
    .hero h1{margin:0;font-family:"Manrope",sans-serif;font-weight:800;font-size:30px;letter-spacing:0.2px}
    .hero p{margin:8px 0 0;color:var(--muted);font-size:15px;max-width:64ch}
    .hero .cta{display:flex;flex-direction:column;gap:10px;align-items:flex-end}
    .home-btn{
      background:linear-gradient(180deg,var(--accent),var(--highlight));
      color:white;padding:10px 14px;border-radius:12px;text-decoration:none;font-weight:700;box-shadow:0 10px 30px rgba(62,123,58,0.12);
      transition:transform .18s ease, box-shadow .18s;
    }
    .home-btn:hover{transform:translateY(-3px);box-shadow:0 18px 40px rgba(62,123,58,0.18)}

    /* stats grid */
    .stats-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:20px;
      margin-top:22px;
    }
    .stat-card{
      background: linear-gradient(180deg,#fff, #fbfaf6);
      padding:18px;border-radius:14px;
      display:flex;gap:14px;align-items:flex-start;
      box-shadow: 0 10px 36px rgba(20,20,18,0.05);
      border: 1px solid rgba(20,20,18,0.03);
      transition: transform .22s cubic-bezier(.2,.9,.2,1), box-shadow .22s;
    }
    .stat-card:hover{transform:translateY(-6px);box-shadow:0 26px 70px rgba(20,20,18,0.08)}
    .stat-icon{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--beige),var(--taupe));display:grid;place-items:center;flex:0 0 52px}
    .stat-body{flex:1}
    .stat-title{font-size:13px;color:var(--muted);margin-bottom:6px}
    .stat-num{font-weight:800;font-size:20px;color:var(--dark);letter-spacing:0.3px}
    .stat-sub{font-size:13px;color:var(--muted);margin-top:8px}

    /* visual row */
    .visual-row{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:30px}
    @media (max-width:920px){ .visual-row{grid-template-columns:1fr} }

    .panel{
      padding:20px;border-radius:14px;background:linear-gradient(180deg,#fff,#fbfaf6);
      box-shadow: 0 14px 46px rgba(20,20,18,0.05);border:1px solid rgba(20,20,18,0.03);
    }
    .panel h3{margin:0 0 10px;font-family:'Manrope',sans-serif}
    .chart-wrap{height:280px;display:flex;align-items:center;justify-content:center}
    @media (max-width:920px){ .chart-wrap{height:240px} }

    /* explanation & citation styles */
    .explain{margin-top:12px;color:var(--muted);font-size:14px;line-height:1.45}
    .citation{margin-top:10px;font-size:12px;color:#6b6f56; font-style:italic}

    .mini-grid{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    .mini{background:rgba(88,89,47,0.06);padding:10px;border-radius:10px;font-size:13px;color:var(--dark);font-weight:600}

    /* emphasis panel */
    .impact-panel{display:flex;align-items:center;gap:18px}
    .impact-number{font-weight:900;font-size:32px;color:var(--highlight)}
    .impact-sub{font-size:13px;color:var(--muted)}

    /* footer */
    footer{max-width:var(--maxw);margin:36px auto;padding:14px 6vw;color:var(--muted);font-size:13px;text-align:center}
  </style>
</head>
<body>
  <!-- decorative SVG waves -->
  <div class="bg-wave top-right" aria-hidden="true">
    <svg viewBox="0 0 800 500" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="g1" x1="0" x2="1">
          <stop offset="0" stop-color="#A6A085"/>
          <stop offset="1" stop-color="#D9D5C5"/>
        </linearGradient>
      </defs>
      <path d="M0,160 C160,20 320,260 520,120 C740,-40 900,200 1200,100 L1200 600 L0 600 Z" fill="url(#g1)"/>
    </svg>
  </div>

  <div class="bg-wave bottom-left" aria-hidden="true">
    <svg viewBox="0 0 800 500" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="g2" x1="0" x2="1">
          <stop offset="0" stop-color="#F2EFE7"/>
          <stop offset="1" stop-color="#E9E5D8"/>
        </linearGradient>
      </defs>
      <path d="M0,300 C120,420 260,200 460,260 C660,320 820,120 1000,200 L1000 700 L0 700 Z" fill="url(#g2)"/>
    </svg>
  </div>

 <header>
  <div class="brand">
    <div class="mark"><i data-lucide="leaf"></i></div>
    <div class="title">PROJECT <strong style="display:block;font-weight:800">HAPLOS</strong></div>
  </div>

  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html" aria-current="page">About</a></li>
      <li><a href="process.html">Process</a></li> <!-- changed -->
      <li><a href="index.html#automation">Automation</a></li>
    </ul>
  </nav>
</header>


  <main>
    <!-- Hero -->
    <section class="hero" aria-labelledby="hero-heading">
      <div>
        <h1 id="hero-heading">Why HAPLOS matters — immediate context</h1>
        <p>We convert abundant coconut agricultural waste into a low-cost, consistent wound dressing — addressing high infection burdens where sterile, affordable options are limited.</p>
      </div>

      <div class="cta">
        <a class="home-btn" href="index.html">← Back to home</a>
        <div style="font-size:13px;color:var(--muted)">Figures sourced and visualized below</div>
      </div>
    </section>

    <!-- Stats -->
    <section class="stats-grid" aria-label="Key statistics">
      <article class="stat-card" role="group" aria-labelledby="stat-husks">
        <div class="stat-icon"><i data-lucide="package"></i></div>
        <div class="stat-body">
          <div id="stat-husks" class="stat-title">Coconut husks (Philippines, 2014)</div>
          <div class="stat-num" id="husks-counter">0</div>
          <div class="stat-sub">Estimated husks left or burnt in-field <span class="citation">(DA, 2014)</span></div>
        </div>
      </article>

      <article class="stat-card" role="group" aria-labelledby="stat-sepsis">
        <div class="stat-icon"><i data-lucide="activity"></i></div>
        <div class="stat-body">
          <div id="stat-sepsis" class="stat-title">Sepsis cases (global, 2017)</div>
          <div class="stat-num" id="sepsis-counter">0</div>
          <div class="stat-sub">Estimated total cases <span class="citation">(Rudd et al., 2020)</span></div>
        </div>
      </article>

      <article class="stat-card" role="group" aria-labelledby="stat-deaths">
        <div class="stat-icon"><i data-lucide="heart-crack"></i></div>
        <div class="stat-body">
          <div id="stat-deaths" class="stat-title">Sepsis deaths (global, 2017)</div>
          <div class="stat-num" id="deaths-counter">0</div>
          <div class="stat-sub">Estimated deaths (~20% global deaths) <span class="citation">(Rudd et al., 2020)</span></div>
        </div>
      </article>

      <article class="stat-card" role="group" aria-labelledby="stat-ssi">
        <div class="stat-icon"><i data-lucide="bandage"></i></div>
        <div class="stat-body">
          <div id="stat-ssi" class="stat-title">Surgical site infections (LMICs)</div>
          <div class="stat-num">8–30%</div>
          <div class="stat-sub">Reported SSI range <span class="citation">(Allegranzi et al., 2011)</span></div>
        </div>
      </article>
    </section>

    <!-- Charts & Explanations -->
    <section class="visual-row" aria-label="Charts and explanations">
      <div class="panel" id="panel-sepsis" aria-labelledby="panel-sepsis-heading">
        <h3 id="panel-sepsis-heading">Sepsis: cases vs deaths (2017)</h3>
        <div class="chart-wrap">
          <canvas id="sepsisDonut" role="img" aria-label="Donut chart showing sepsis survivors vs deaths"></canvas>
        </div>
        <p class="explain"><strong>What this shows:</strong> Of the ~48.9 million sepsis cases in 2017, roughly 11 million resulted in death — highlighting the urgent need to prevent infections and improve wound care access globally.</p>
        <div class="mini-grid">
          <div class="mini">48.9M cases</div>
          <div class="mini">11.0M deaths</div>
          <div class="mini">Deaths ≈ 22.5%</div>
        </div>
        <div class="citation">Source: Rudd et al., 2020 (Lancet-led analysis).</div>
      </div>

      <div class="panel" id="panel-infections" aria-labelledby="panel-infections-heading">
        <h3 id="panel-infections-heading">Infection rates — selected contexts</h3>
        <div class="chart-wrap">
          <canvas id="infectionBars" role="img" aria-label="Horizontal bar chart comparing infection rates in different contexts"></canvas>
        </div>
        <p class="explain"><strong>Key takeaway:</strong> Community-treated wounds and health-center cases show substantial secondary infection rates; combat and emergency settings report very high infection burdens — underlining the role of accessible sterile dressings.</p>
        <div class="mini-grid">
          <div class="mini">Community wounds: 10.3%</div>
          <div class="mini">Health center wounds: 31.0%</div>
          <div class="mini">Combat casualty infections: 34%</div>
        </div>
        <div class="citation">Sources: Kouassi et al., 2023; Murray et al., 2009.</div>
      </div>
    </section>

    <!-- Emphasis impact -->
    <section style="margin-top:30px">
      <div class="panel impact-panel" aria-label="Impact emphasis">
        <div style="flex:1">
          <h3 style="margin:0 0 8px">Why this matters for HAPLOS</h3>
          <p class="explain">High local availability of coconut husks + severe infection burdens create an opportunity: consistent, low-cost dressings made from biomass can expand access and reduce infection-related morbidity.</p>
          <div class="citation">Selected refs: DA (2014); Rudd et al. (2020); Allegranzi et al. (2011); Murray et al. (2009); Kouassi et al. (2023).</div>
        </div>

        <div style="width:220px;text-align:center">
          <div id="impactCounter" class="impact-number">🥥</div>
        </div>
      </div>
    </section>

  </main>

  <footer>
    Data snapshots with sources. For full references and methodology, keep the project repository as authoritative.
  </footer>

  <script>
    // Ensure DOM ready
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();

      // Utilities
      const easeOutCubic = t => (--t)*t*t+1;
      function animateNumberTo(el, end, duration = 1400, formatter) {
        const start = 0;
        const t0 = performance.now();
        function frame(now) {
          const t = Math.min(1, (now - t0)/duration);
          const val = start + (end - start) * easeOutCubic(t);
          el.textContent = formatter ? formatter(val) : Math.round(val).toLocaleString();
          if (t < 1) requestAnimationFrame(frame);
        }
        requestAnimationFrame(frame);
      }

      // Formatters
      const intFmt = v => Math.round(v).toLocaleString();

      // Intersection observer: animate when visible
      const options = { root: null, rootMargin: "0px", threshold: 0.35 };
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) return;
          const id = entry.target.id;

          if (id === 'panel-sepsis') {
            // Render donut if not already
            if (!entry.target.dataset.rendered) {
              renderSepsisDonut();
              entry.target.dataset.rendered = "1";
            }
          }

          if (id === 'panel-infections') {
            if (!entry.target.dataset.rendered) {
              renderInfectionBars();
              entry.target.dataset.rendered = "1";
            }
          }

          if (entry.target.matches && entry.target.querySelector) {
            // animate counters in stat cards when stats grid visible
          }

          // animate counters when stats-grid area becomes visible
          if (entry.target.id === 'panel-sepsis' || entry.target.id === 'panel-infections') {
            // nothing extra
          }

        });
      }, options);

      // Observe panels for chart render
      const panelSepsis = document.getElementById('panel-sepsis');
      const panelInfections = document.getElementById('panel-infections');
      observer.observe(panelSepsis);
      observer.observe(panelInfections);

      // Also animate the stat counters when the stats grid enters view
      const statsGrid = document.querySelector('.stats-grid');
      const statsObserver = new IntersectionObserver((entries) => {
        entries.forEach(e=>{
          if (e.isIntersecting) {
            // counters
            animateNumberTo(document.getElementById('husks-counter'), 9000000000, 1600, v => Math.round(v).toLocaleString());
            animateNumberTo(document.getElementById('sepsis-counter'), 48900000, 1400, v => Math.round(v).toLocaleString());
            animateNumberTo(document.getElementById('deaths-counter'), 11000000, 1400, v => Math.round(v).toLocaleString());
            statsObserver.disconnect();
          }
        });
      }, {threshold: 0.25});
      statsObserver.observe(statsGrid);

      // Chart rendering functions
      let donutChart = null;
      function renderSepsisDonut(){
        const ctx = document.getElementById('sepsisDonut').getContext('2d');
        donutChart = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: ['Survivors (approx.)', 'Deaths'],
            datasets: [{
              data: [48900000 - 11000000, 11000000],
              backgroundColor: ['#A6A085', '#3E7B3A'],
              borderColor: 'rgba(255,255,255,0.6)',
              hoverOffset: 10
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { position: 'bottom', labels: {usePointStyle: true, padding:12} },
              tooltip: {
                callbacks: {
                  label: function(ctx) {
                    const val = ctx.parsed;
                    const label = ctx.label || '';
                    const display = val >= 1000000 ? (val/1e6).toFixed(1) + 'M' : val.toLocaleString();
                    return label + ': ' + display;
                  }
                }
              }
            },
            animation: { duration: 1000, easing: 'easeOutCubic' }
          }
        });
      }

      let barChart = null;
      function renderInfectionBars(){
        const ctx = document.getElementById('infectionBars').getContext('2d');
        barChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ['Community wounds', 'Health center wounds', 'Combat casualties'],
            datasets: [{
              label: 'Infection rate (%)',
              data: [10.3, 31.0, 34.0],
              backgroundColor: ['#A6A085','#3E7B3A','#D9D5C5'],
              borderRadius: 8,
              barThickness: 24
            }]
          },
          options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: { beginAtZero: true, max: 40, ticks: { callback: v => v + '%' } },
              y: { ticks: { color: '#222' } }
            },
            plugins: {
              legend: { display: false },
              tooltip: { callbacks: { label: ctx => ctx.parsed.x + '%' } }
            },
            animation: { duration: 900, easing: 'easeOutQuad' }
          }
        });
      }

      // Quick render small charts if user scrolls quickly (fallback)
      // If panels are already in view at load, render immediately
      const rectS = panelSepsis.getBoundingClientRect();
      if (rectS.top < window.innerHeight) renderSepsisDonut();
      const rectI = panelInfections.getBoundingClientRect();
      if (rectI.top < window.innerHeight) renderInfectionBars();

      // Stagger reveal for stat cards (visual polish)
      document.querySelectorAll('.stat-card').forEach((el,i) => {
        el.style.opacity = 0;
        el.style.transform = 'translateY(12px)';
        setTimeout(()=> {
          el.style.transition = 'opacity .6s ease, transform .6s cubic-bezier(.2,.9,.2,1)';
          el.style.opacity = 1;
          el.style.transform = 'translateY(0)';
        }, 120 + i*110);
      });
    });
  </script>
</body>
</html>
